{
  "id": "net.danigm.rust-nightly",
  "runtime": "org.freedesktop.Sdk",
  "sdk": "org.freedesktop.Sdk",
  "runtime-version": "18.08",
  "command" : "testapp",
  "cleanup": [ "/sdk" ],
  "modules": [
    {
      "name": "rust",
      "buildsystem": "simple",
      "sources": [
        {
          "type": "archive",
          "only-arches": [
            "x86_64"
          ],
          "url": "https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz",
          "sha256": "8c714c2fc359fe55f121859dbefc5ac0f722c10b7e1ebf5657bf455c57be5376"
        }
      ],
      "build-commands": [
        "./install.sh --prefix=/app/sdk/rust --disable-ldconfig --verbose"
      ]
    },
    {
      "name": "app",
      "buildsystem": "simple",
      "build-commands": [
        "PATH=$PATH:/app/sdk/rust/bin cargo build --release",
        "install -Dm755 target/release/testapp /app/bin/testapp"
      ],
      "sources": [
        {
          "type": "dir",
          "path": "testapp"
        }
      ]
    },
    {
        "name": "finish",
        "buildsystem": "simple",
        "build-commands": []
    }
  ]
}

